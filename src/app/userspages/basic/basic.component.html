<div class="divClass">
    <h1>Ispitanik stranica</h1>
</div>
<div class="logoutClass">
    <button mat-flat-button type="button" (click)="logout()">Izloguj se</button>
</div>

<mat-card>
    <table mat-table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Naziv </th>
            <td mat-cell *matCellDef="let poll"> {{poll.name}} </td>
        </ng-container>

        <ng-container matColumnDef="startDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Datum poƒçetka </th>
            <td mat-cell *matCellDef="let poll"> {{poll.startDate.getDate()}}. {{(poll.startDate.getMonth() + 1)}}. {{poll.startDate.getFullYear()}} </td>
            </ng-container>

        <ng-container matColumnDef="endDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Datum kraja </th>
            <td mat-cell *matCellDef="let poll"> {{poll.endDate.getDate()}}. {{(poll.endDate.getMonth() + 1)}}. {{poll.endDate.getFullYear()}} </td>
        </ng-container>

        <ng-container matColumnDef="fill">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> </th>
            <td mat-cell *matCellDef="let poll"> 
                <span *ngIf="isPollFilledByThisUser(poll)">
                    <!-- <label>Anketa je vec popunjena.</label> -->
                    <button mat-button color="primary" type="button" (click)="reviewPoll(poll)">Pogledaj svoj odgovor</button>
                </span> 
                <span *ngIf="!isPollFilledByThisUser(poll) && (poll.startDate > today || poll.endDate < today)">
                    <label>Anketa se ne moze popunjavati</label>
                </span> 
                <span *ngIf="!isPollFilledByThisUser(poll) && poll.startDate < today && poll.endDate > today">
                    <button mat-button color="accent" type="button" (click)="fillPoll(poll)">Popuni anketu</button>
                </span> 
            </td>
        </ng-container>
    
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</mat-card>



